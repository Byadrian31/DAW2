<html>

<head>
    <meta charset="UTF-8">
    <title>Pokemon Battle</title>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <link rel="stylesheet" href="css/style.css">
</head>

<body>
    <div id="app">
        <!-- MenÃº de selecciÃ³n de personajes en lÃ­nea -->
        <div v-if="!charactersSelected" class="character-selection">
            <h2>Elige tu entrenador y tu rival</h2>
            <div class="character-container">
                <div class="character-box">
                    <h3>Tu entrenador</h3>
                    <button @click="prevCharacter('player')">&#60;</button>
                    <img :src="'img/' + characters[playerCharacter]" :alt="characters[playerCharacter]">
                    <button @click="nextCharacter('player')">&#62;</button>
                </div>
                <div class="character-box">
                    <h3>Tu rival</h3>
                    <button @click="prevCharacter('rival')">&#60;</button>
                    <img :src="'img/' + characters[rivalCharacter]" :alt="characters[rivalCharacter]">
                    <button @click="nextCharacter('rival')">&#62;</button>
                </div>
            </div>
            <button class="start-game" @click="charactersSelected = true; showPokemonModal = true" :disabled="playerCharacter === rivalCharacter">Confirmar</button>
        </div>

        <!-- Modal de selecciÃ³n de PokÃ©mon -->
        <div v-if="showPokemonModal" class="modal-container">
            <div class="modal modal-large">
                <h2 v-if="selectedPokemonsPlayer.length < 6">Selecciona 6 PokÃ©mon</h2>
                <h2 v-if="selectedPokemonsPlayer.length === 6">Equipo seleccionado</h2>
                <div class="start-battle">
                    <button @click="fillRandomTeam">Seleccionar equipo aleatorio</button>
                </div>
                <div class="selected-team">
                    <div v-for="(pokemon, index) in selectedPokemonsPlayer" :key="index" class="carta" @click="removePokemon(index)">
                        <img :src="pokemon.sprite" :alt="pokemon.name">
                        <div>{{ pokemon.name }}</div>
                    </div>
                </div>
                
                <div class="filters" v-if="selectedPokemonsPlayer.length < 6">
                    <input type="text" v-model="searchQuery" class="pokemon-input" placeholder="Buscar PokÃ©mon...">
                    <select v-model="selectedType" class="pokemon-dropdown">
                        <option value="">Todos los tipos</option>
                        <option value="fire">ğŸ”¥ Fuego</option>
                        <option value="water">ğŸ’§ Agua</option>
                        <option value="grass">ğŸŒ¿ Planta</option>
                        <option value="electric">âš¡ ElÃ©ctrico</option>
                        <option value="ice">â„ï¸ Hielo</option>
                        <option value="fighting">ğŸ¥Š Lucha</option>
                        <option value="poison">â˜ ï¸ Veneno</option>
                        <option value="ground">ğŸœï¸ Tierra</option>
                        <option value="flying">ğŸ•Šï¸ Volador</option>
                        <option value="psychic">ğŸ”® PsÃ­quico</option>
                        <option value="bug">ğŸ Bicho</option>
                        <option value="rock">ğŸª¨ Roca</option>
                        <option value="ghost">ğŸ‘» Fantasma</option>
                        <option value="dragon">ğŸ‰ DragÃ³n</option>
                        <option value="dark">ğŸŒ‘ Siniestro</option>
                        <option value="steel">ğŸ”© Acero</option>
                        <option value="fairy">âœ¨ Hada</option>
                    </select>
                </div>
                
                <div class="pokemon-grid" v-if="selectedPokemonsPlayer.length < 6">
                    <div v-for="pokemon in filteredPokemons" :key="pokemon.id" class="carta" 
                        :class="{ 'seleccionada': selectedPokemonsPlayer.includes(pokemon) }" 
                        @click="selectPokemon(pokemon)">
                        <img :src="pokemon.sprite" :alt="pokemon.name">
                        <div>{{ pokemon.name }}</div>
                    </div>
                </div>

                <div class="start-battle">
                    <button v-if="selectedPokemonsPlayer.length === 6" @click="startBattle()" class="Button">Â¡A LUCHAR!</button>
                </div>
            </div>
        </div>

        <!-- AnimaciÃ³n de enfrentamiento -->
        <div v-if="battleStarted && !battlefieldShown" class="battle-container">
            <img :src="'img/' + characters[playerCharacter]" class="player-trainer">
            <h1 class="vs-text">VS</h1>
            <img :src="'img/' + characters[rivalCharacter]" class="rival-trainer">
        </div>

        <!-- Campo de batalla (aparece despuÃ©s de 5s) -->
        <div v-if="battlefieldShown" class="battlefield">
            <div class="player-team">
                <img v-for="pokemon in selectedPokemonsPlayer" :key="pokemon.id" :src="pokemon.sprite" :alt="pokemon.name">
            </div>
            
            <div class="battle-zone">
                <h1 class="vs-text">VS</h1>
            </div>
            
            <div class="rival-team">
                <img v-for="pokemon in selectedPokemonsRival" :key="pokemon.id" :src="pokemon.sprite" :alt="pokemon.name">
            </div>
        </div>
    </div>
    <script src="js/scripts.js"></script>
</body>

</html>
